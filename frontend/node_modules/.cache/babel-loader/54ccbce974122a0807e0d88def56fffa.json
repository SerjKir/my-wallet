{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/Admin/Projects/my-wallet/frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _objectSpread from\"C:/Users/Admin/Projects/my-wallet/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _asyncToGenerator from\"C:/Users/Admin/Projects/my-wallet/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import React,{useEffect}from'react';import styles from'./AddModal.module.scss';import{Button,FormControl,InputLabel,MenuItem,Select,TextField}from'@mui/material';import{addCash,updateCard,updateCash}from'../../api/mainApi';import{useForm}from'react-hook-form';import{useCurrency}from'../../hooks/currency.hook';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Index=function Index(_ref){var _errors$amount,_errors$amount2;var isModal=_ref.isModal,setIsModal=_ref.setIsModal,getUserData=_ref.getUserData,isName=_ref.isName,isEdit=_ref.isEdit,changeItemData=_ref.changeItemData,setChangeItemData=_ref.setChangeItemData,isCash=_ref.isCash;var _useCurrency=useCurrency(),currency=_useCurrency.currency,selectedCurrency=_useCurrency.selectedCurrency,getAvailableCurrency=_useCurrency.getAvailableCurrency,handleSelectChange=_useCurrency.handleSelectChange;var _useForm=useForm({mode:'onBlur'}),register=_useForm.register,handleSubmit=_useForm.handleSubmit,_useForm$formState=_useForm.formState,errors=_useForm$formState.errors,isValid=_useForm$formState.isValid;var onSubmit=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(values){return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(!(isEdit&&!isCash)){_context.next=5;break;}_context.next=3;return updateCard(changeItemData.id,changeItemData.amount,changeItemData.name).then(function(res){getUserData();setIsModal(false);}).catch(function(err){return console.log(err);});case 3:_context.next=12;break;case 5:if(!isCash){_context.next=10;break;}_context.next=8;return updateCash(changeItemData.amount,changeItemData.currency);case 8:_context.next=12;break;case 10:_context.next=12;return addCash(_objectSpread({currency:selectedCurrency},values)).then(function(data){getUserData();setIsModal(false);}).catch(function(err){return console.log(err);});case 12:case\"end\":return _context.stop();}}},_callee);}));return function onSubmit(_x){return _ref2.apply(this,arguments);};}();useEffect(function(){getAvailableCurrency();},[getAvailableCurrency]);return/*#__PURE__*/_jsx(\"div\",{style:{display:isModal?'flex':'none'},className:styles.background,children:/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit(onSubmit),className:styles.inner,children:[/*#__PURE__*/_jsxs(\"div\",{className:styles.row,children:[isEdit?/*#__PURE__*/_jsx(TextField,{value:changeItemData===null||changeItemData===void 0?void 0:changeItemData.amount,onChange:function onChange(e){return setChangeItemData(_objectSpread(_objectSpread({},changeItemData),{},{amount:e.target.value}));},required:true,type:'number',fullWidth:true,label:\"amount\",variant:\"outlined\"}):/*#__PURE__*/_jsx(TextField,_objectSpread({required:true,type:'number',fullWidth:true,label:\"amount\",variant:\"outlined\",error:!!((_errors$amount=errors.amount)!==null&&_errors$amount!==void 0&&_errors$amount.message),helperText:(_errors$amount2=errors.amount)===null||_errors$amount2===void 0?void 0:_errors$amount2.message},register('amount',{required:\"Вкажіть кілкість\",min:1}))),/*#__PURE__*/_jsxs(FormControl,{fullWidth:true,children:[/*#__PURE__*/_jsx(InputLabel,{children:\"Currency\"}),/*#__PURE__*/_jsx(Select,{disabled:isEdit,label:\"currency\",value:selectedCurrency,onChange:handleSelectChange,children:currency===null||currency===void 0?void 0:currency.map(function(elem,index){return/*#__PURE__*/_jsx(MenuItem,{value:elem,children:elem},index);})})]}),isName&&/*#__PURE__*/_jsx(TextField,{value:changeItemData===null||changeItemData===void 0?void 0:changeItemData.name,onChange:function onChange(e){return setChangeItemData(_objectSpread(_objectSpread({},changeItemData),{},{name:e.target.value}));},fullWidth:true,label:\"name\",variant:\"outlined\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:styles.row,children:[/*#__PURE__*/_jsx(Button,{type:'submit',variant:'contained',color:'primary',disabled:!isValid,children:\"\\u0417\\u0431\\u0435\\u0440\\u0435\\u0433\\u0442\\u0438\"}),/*#__PURE__*/_jsx(Button,{variant:'contained',color:'error',onClick:function onClick(){return setIsModal(false);},children:\"\\u0421\\u043A\\u0430\\u0441\\u0443\\u0432\\u0430\\u0442\\u0438\"})]})]})});};export default Index;","map":{"version":3,"names":["React","useEffect","styles","Button","FormControl","InputLabel","MenuItem","Select","TextField","addCash","updateCard","updateCash","useForm","useCurrency","Index","isModal","setIsModal","getUserData","isName","isEdit","changeItemData","setChangeItemData","isCash","currency","selectedCurrency","getAvailableCurrency","handleSelectChange","mode","register","handleSubmit","formState","errors","isValid","onSubmit","values","id","amount","name","then","res","catch","err","console","log","data","display","background","inner","row","e","target","value","message","required","min","map","elem","index"],"sources":["C:/Users/Admin/Projects/my-wallet/frontend/src/components/AddModal/index.js"],"sourcesContent":["import React, { useEffect } from 'react';\r\nimport styles from './AddModal.module.scss'\r\nimport {Button, FormControl, InputLabel, MenuItem, Select, TextField} from '@mui/material';\r\nimport {addCash, updateCard, updateCash} from '../../api/mainApi';\r\nimport {useForm} from 'react-hook-form';\r\nimport {useCurrency} from '../../hooks/currency.hook';\r\n\r\nconst Index = ({isModal, setIsModal, getUserData, isName, isEdit, changeItemData, setChangeItemData, isCash}) => {\r\n  const {currency, selectedCurrency, getAvailableCurrency, handleSelectChange} = useCurrency();\r\n\r\n  const {\r\n    register,\r\n    handleSubmit,\r\n    formState: {errors, isValid},\r\n  } = useForm({\r\n    mode: 'onBlur',\r\n  });\r\n\r\n  const onSubmit = async (values) => {\r\n    if (isEdit && !isCash) {\r\n      await updateCard(changeItemData.id, changeItemData.amount , changeItemData.name).then(res => {\r\n        getUserData();\r\n        setIsModal(false);\r\n      }).catch(err => console.log(err));\r\n    } else if (isCash) {\r\n      await updateCash(changeItemData.amount, changeItemData.currency);\r\n    } else {\r\n      await addCash({currency: selectedCurrency, ...values})\r\n        .then(data => {\r\n          getUserData();\r\n          setIsModal(false)\r\n        })\r\n        .catch(err => console.log(err));\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    getAvailableCurrency();\r\n  }, [getAvailableCurrency]);\r\n\r\n  return (\r\n    <div style={{display: isModal ? 'flex' : 'none'}} className={styles.background}>\r\n      <form onSubmit={handleSubmit(onSubmit)} className={styles.inner}>\r\n        <div className={styles.row}>\r\n          {isEdit ? <TextField value={changeItemData?.amount}\r\n                               onChange={(e) => setChangeItemData({...changeItemData, amount: e.target.value})}\r\n                               required={true} type={'number'} fullWidth label=\"amount\" variant=\"outlined\"\r\n          /> : <TextField required={true} type={'number'} fullWidth label=\"amount\" variant=\"outlined\"\r\n                          error={!!errors.amount?.message}\r\n                          helperText={errors.amount?.message}\r\n                          {...register('amount', {required: \"Вкажіть кілкість\" ,min: 1 })}\r\n          />}\r\n          <FormControl fullWidth>\r\n            <InputLabel>Currency</InputLabel>\r\n            <Select\r\n              disabled={isEdit}\r\n              label=\"currency\"\r\n              value={selectedCurrency}\r\n              onChange={handleSelectChange}\r\n            >\r\n              {currency?.map((elem, index) => <MenuItem key={index} value={elem}>{elem}</MenuItem>)}\r\n            </Select>\r\n          </FormControl>\r\n          {isName && <TextField value={changeItemData?.name}\r\n                                onChange={(e) =>\r\n                                  setChangeItemData({...changeItemData, name: e.target.value})} fullWidth label=\"name\" variant=\"outlined\" />}\r\n        </div>\r\n        <div className={styles.row}>\r\n          <Button type={'submit'} variant={'contained'} color={'primary'} disabled={!isValid}>Зберегти</Button>\r\n          <Button variant={'contained'} color={'error'} onClick={() => setIsModal(false)}>Скасувати</Button>\r\n        </div>\r\n      </form>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Index;"],"mappings":"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"},"metadata":{},"sourceType":"module"}