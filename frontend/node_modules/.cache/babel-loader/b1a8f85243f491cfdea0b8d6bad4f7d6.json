{"ast":null,"code":"var _s = $RefreshSig$();\n\nimport { useCallback, useEffect, useState } from 'react';\nconst storage = 'userData';\nexport const useAuth = () => {\n  _s();\n\n  const [token, setToken] = useState(null);\n  const [userId, setUserId] = useState(null);\n  const [ready, setReady] = useState(false);\n  const login = useCallback((token, id) => {\n    setToken(token);\n    setUserId(id);\n    localStorage.setItem(storage, JSON.stringify({\n      token,\n      id\n    }));\n  }, []);\n  const logout = useCallback(() => {\n    setToken(null);\n    setUserId(null);\n    localStorage.removeItem(storage);\n  }, []);\n  useEffect(() => {\n    const data = JSON.parse(localStorage.getItem(storage));\n\n    if (data && data.token) {\n      login(data.token, data.userId);\n    }\n\n    setReady(true);\n  }, [login]);\n  return {\n    login,\n    logout,\n    token,\n    userId,\n    ready\n  };\n};\n\n_s(useAuth, \"nXr0LXjfRF2enXJ8EmUX5DYZyls=\");","map":{"version":3,"names":["useCallback","useEffect","useState","storage","useAuth","token","setToken","userId","setUserId","ready","setReady","login","id","localStorage","setItem","JSON","stringify","logout","removeItem","data","parse","getItem"],"sources":["C:/Users/Admin/Projects/my-wallet/frontend/src/hooks/auth.hook.js"],"sourcesContent":["import {useCallback, useEffect, useState} from 'react';\r\n\r\nconst storage = 'userData';\r\n\r\nexport const useAuth = () => {\r\n  const [token, setToken] = useState(null);\r\n  const [userId, setUserId] = useState(null);\r\n  const [ready, setReady] = useState(false);\r\n\r\n  const login = useCallback((token, id) => {\r\n    setToken(token);\r\n    setUserId(id);\r\n    localStorage.setItem(storage, JSON.stringify({\r\n      token, id\r\n    }));\r\n  }, []);\r\n\r\n  const logout = useCallback(() => {\r\n    setToken(null);\r\n    setUserId(null);\r\n    localStorage.removeItem(storage);\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    const data = JSON.parse(localStorage.getItem(storage))\r\n    if (data && data.token) {\r\n      login(data.token, data.userId)\r\n    }\r\n    setReady(true)\r\n  }, [login])\r\n\r\n  return {login, logout, token, userId, ready}\r\n}"],"mappings":";;AAAA,SAAQA,WAAR,EAAqBC,SAArB,EAAgCC,QAAhC,QAA+C,OAA/C;AAEA,MAAMC,OAAO,GAAG,UAAhB;AAEA,OAAO,MAAMC,OAAO,GAAG,MAAM;EAAA;;EAC3B,MAAM,CAACC,KAAD,EAAQC,QAAR,IAAoBJ,QAAQ,CAAC,IAAD,CAAlC;EACA,MAAM,CAACK,MAAD,EAASC,SAAT,IAAsBN,QAAQ,CAAC,IAAD,CAApC;EACA,MAAM,CAACO,KAAD,EAAQC,QAAR,IAAoBR,QAAQ,CAAC,KAAD,CAAlC;EAEA,MAAMS,KAAK,GAAGX,WAAW,CAAC,CAACK,KAAD,EAAQO,EAAR,KAAe;IACvCN,QAAQ,CAACD,KAAD,CAAR;IACAG,SAAS,CAACI,EAAD,CAAT;IACAC,YAAY,CAACC,OAAb,CAAqBX,OAArB,EAA8BY,IAAI,CAACC,SAAL,CAAe;MAC3CX,KAD2C;MACpCO;IADoC,CAAf,CAA9B;EAGD,CANwB,EAMtB,EANsB,CAAzB;EAQA,MAAMK,MAAM,GAAGjB,WAAW,CAAC,MAAM;IAC/BM,QAAQ,CAAC,IAAD,CAAR;IACAE,SAAS,CAAC,IAAD,CAAT;IACAK,YAAY,CAACK,UAAb,CAAwBf,OAAxB;EACD,CAJyB,EAIvB,EAJuB,CAA1B;EAMAF,SAAS,CAAC,MAAM;IACd,MAAMkB,IAAI,GAAGJ,IAAI,CAACK,KAAL,CAAWP,YAAY,CAACQ,OAAb,CAAqBlB,OAArB,CAAX,CAAb;;IACA,IAAIgB,IAAI,IAAIA,IAAI,CAACd,KAAjB,EAAwB;MACtBM,KAAK,CAACQ,IAAI,CAACd,KAAN,EAAac,IAAI,CAACZ,MAAlB,CAAL;IACD;;IACDG,QAAQ,CAAC,IAAD,CAAR;EACD,CANQ,EAMN,CAACC,KAAD,CANM,CAAT;EAQA,OAAO;IAACA,KAAD;IAAQM,MAAR;IAAgBZ,KAAhB;IAAuBE,MAAvB;IAA+BE;EAA/B,CAAP;AACD,CA5BM;;GAAML,O"},"metadata":{},"sourceType":"module"}