{"ast":null,"code":"import _objectSpread from\"C:/Users/Admin/Projects/my-wallet/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _regeneratorRuntime from\"C:/Users/Admin/Projects/my-wallet/frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/Admin/Projects/my-wallet/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/Admin/Projects/my-wallet/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useContext,useState}from'react';import{Button,Paper,TextField,Typography}from'@mui/material';import styles from'./Login.module.scss';import{useForm}from'react-hook-form';import{loginApi,registerApi}from'../../api/mainApi';import{useNavigate}from'react-router-dom';import{AuthContext}from'../../context/AuthContext';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Index=function Index(){var _errors$name,_errors$name2,_errors$password,_errors$password2;var _useState=useState(true),_useState2=_slicedToArray(_useState,2),isLogin=_useState2[0],setIsLogin=_useState2[1];var _useContext=useContext(AuthContext),login=_useContext.login;var navigate=useNavigate();var _useForm=useForm({defaultValues:{name:'',password:''},mode:'onChange'}),register=_useForm.register,handleSubmit=_useForm.handleSubmit,_useForm$formState=_useForm.formState,errors=_useForm$formState.errors,isValid=_useForm$formState.isValid;var onSubmit=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(values){var _data;var data;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:data=null;_context.next=3;return(isLogin?loginApi:registerApi)(values).then(function(res){data=res;}).catch(function(error){console.log(isLogin?'Не вдалося авторизуватися':'Не вдалося зареєструватися');});case 3:if(!((_data=data)!==null&&_data!==void 0&&_data.token)){_context.next=7;break;}_context.next=6;return login(data.token,data.userId);case 6:navigate('/',{replace:true});case 7:case\"end\":return _context.stop();}}},_callee);}));return function onSubmit(_x){return _ref.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(Paper,{classes:{root:styles.root},children:[/*#__PURE__*/_jsx(Typography,{variant:\"h5\",classes:{root:styles.title},children:isLogin?'Вхід до аккаунта':'Реєстрація аккаунта'}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit(onSubmit),children:[/*#__PURE__*/_jsx(TextField,_objectSpread({label:\"Name\",fullWidth:true,className:styles.field,error:!!((_errors$name=errors.name)!==null&&_errors$name!==void 0&&_errors$name.message),helperText:(_errors$name2=errors.name)===null||_errors$name2===void 0?void 0:_errors$name2.message},register('name',{required:\"Вкажіть им'я\"}))),/*#__PURE__*/_jsx(TextField,_objectSpread({label:\"Password\",fullWidth:true,className:styles.field,error:!!((_errors$password=errors.password)!==null&&_errors$password!==void 0&&_errors$password.message),helperText:(_errors$password2=errors.password)===null||_errors$password2===void 0?void 0:_errors$password2.message},register('password',{required:'Вкажіть пароль'}))),isLogin?/*#__PURE__*/_jsxs(\"div\",{className:styles.buttons,children:[/*#__PURE__*/_jsx(Button,{type:'submit',size:\"large\",variant:\"contained\",color:'primary',disabled:!isValid,children:\"\\u0412\\u043E\\u0439\\u0442\\u0438\"}),/*#__PURE__*/_jsx(\"span\",{onClick:function onClick(){return setIsLogin(false);},children:\"\\u041D\\u0435\\u043C\\u0430\\u0454 \\u043E\\u0431\\u043B\\u0456\\u043A\\u043E\\u0432\\u043E\\u0433\\u043E \\u0437\\u0430\\u043F\\u0438\\u0441\\u0443? \\u0420\\u0435\\u0454\\u0441\\u0442\\u0440\\u0430\\u0446\\u0456\\u044F.\"})]}):/*#__PURE__*/_jsxs(\"div\",{className:styles.buttons,children:[/*#__PURE__*/_jsx(Button,{type:'submit',size:\"large\",variant:\"contained\",color:'primary',disabled:!isValid,children:\"\\u0420\\u0435\\u0433\\u0438\\u0441\\u0442\\u0440\\u0430\\u0446\\u0438\\u044F\"}),/*#__PURE__*/_jsx(\"span\",{onClick:function onClick(){return setIsLogin(true);},children:\"\\u0404 \\u043E\\u0431\\u043B\\u0456\\u043A\\u043E\\u0432\\u0438\\u0439 \\u0437\\u0430\\u043F\\u0438\\u0441? \\u0412\\u0445\\u0456\\u0434.\"})]})]})]});};export default Index;","map":{"version":3,"names":["React","useContext","useState","Button","Paper","TextField","Typography","styles","useForm","loginApi","registerApi","useNavigate","AuthContext","Index","isLogin","setIsLogin","login","navigate","defaultValues","name","password","mode","register","handleSubmit","formState","errors","isValid","onSubmit","values","data","then","res","catch","error","console","log","token","userId","replace","root","title","field","message","required","buttons"],"sources":["C:/Users/Admin/Projects/my-wallet/frontend/src/pages/Auth/index.js"],"sourcesContent":["import React, {useContext, useState} from 'react';\r\nimport {Button, Paper, TextField, Typography} from '@mui/material';\r\nimport styles from './Login.module.scss';\r\nimport {useForm} from 'react-hook-form';\r\nimport {loginApi, registerApi} from '../../api/mainApi';\r\nimport {useNavigate} from 'react-router-dom';\r\nimport {AuthContext} from '../../context/AuthContext';\r\n\r\nconst Index = () => {\r\n  const [isLogin, setIsLogin] = useState(true);\r\n  const {login} = useContext(AuthContext)\r\n  const navigate = useNavigate();\r\n  const {\r\n    register,\r\n    handleSubmit,\r\n    formState: {errors, isValid},\r\n  } = useForm({\r\n    defaultValues: {name: '', password: ''},\r\n    mode: 'onChange',\r\n  });\r\n\r\n  const onSubmit = async (values) => {\r\n    let data = null;\r\n    await (isLogin ? loginApi : registerApi)(values).then(res => {\r\n      data = res;\r\n    }).catch(error => {\r\n      console.log(isLogin ? 'Не вдалося авторизуватися' : 'Не вдалося зареєструватися');\r\n    });\r\n    if (data?.token) {\r\n      await login(data.token, data.userId);\r\n      navigate('/', {replace: true});\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Paper classes={{root: styles.root}}>\r\n      <Typography variant=\"h5\" classes={{root: styles.title}}>\r\n        {isLogin ? 'Вхід до аккаунта' : 'Реєстрація аккаунта'}\r\n      </Typography>\r\n      <form onSubmit={handleSubmit(onSubmit)}>\r\n        <TextField\r\n          label=\"Name\"\r\n          fullWidth\r\n          className={styles.field}\r\n          error={!!errors.name?.message}\r\n          helperText={errors.name?.message}\r\n          {...register('name', {required: \"Вкажіть им'я\"})}\r\n        />\r\n        <TextField\r\n          label=\"Password\"\r\n          fullWidth\r\n          className={styles.field}\r\n          error={!!errors.password?.message}\r\n          helperText={errors.password?.message}\r\n          {...register('password', {required: 'Вкажіть пароль'})}\r\n        />\r\n        {isLogin ?\r\n          <div className={styles.buttons} >\r\n            <Button\r\n              type={'submit'}\r\n              size=\"large\"\r\n              variant=\"contained\"\r\n              color={'primary'}\r\n              disabled={!isValid}\r\n            >\r\n              Войти\r\n            </Button>\r\n            <span onClick={() => setIsLogin(false)}>Немає облікового запису? Реєстрація.</span>\r\n          </div>\r\n          :\r\n          <div className={styles.buttons} >\r\n            <Button\r\n              type={'submit'}\r\n              size=\"large\"\r\n              variant=\"contained\"\r\n              color={'primary'}\r\n              disabled={!isValid}\r\n            >\r\n              Регистрация\r\n            </Button>\r\n            <span onClick={() => setIsLogin(true)}>Є обліковий запис? Вхід.</span>\r\n          </div>\r\n        }\r\n      </form>\r\n    </Paper>\r\n  );\r\n};\r\n\r\nexport default Index;"],"mappings":"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"},"metadata":{},"sourceType":"module"}